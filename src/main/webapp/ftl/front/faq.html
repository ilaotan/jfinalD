<#include "/ftl/front/common/_layout.html"/>
 <@layout page_tab="index">

<div class="panel panel-info">
	<div class="panel-body" style="height: 600px; overflow-y: auto;">
		
		<ul class="nav nav-list sidenav" id="treeul" data="url:/ucenter/menu;">
			<li>
			<a href="javascript:void(0);" data="id:0;url:/;"> <span
					class="glyphicon glyphicon-minus"></span> 根菜单(/) <span
					class="label label-primary bstreeadd">添加子菜单</span> <span
					class="label label-primary bstreeedit">修改</span> <span
					class="label label-danger	 bstreedel">删除</span>
			</a>
				<ul style="padding-left: 20px;" id="treeid_0"
					class="nav collapse in">
					<li>
					<a href="javascript:void(0);" data="id:18;url:--;"> 
						<span class="glyphicon glyphicon-minus"></span> auth(--) 
						<span class="label label-primary bstreeadd">添加子菜单</span>
						 <span class="label label-primary bstreeedit">修改</span>
						 <span class="label label-danger	 bstreedel">删除</span>
					</a>
						<ul style="padding-left: 20px;" id="treeid_18"
							class="nav collapse in">
							<li>
								<a href="javascript:void(0);"
									data="id:1;url:/ucenter/menu;"> <span
										class="glyphicon glyphicon-minus"></span> 菜单管理(/ucenter/menu) <span
										class="label label-primary bstreeadd">添加子菜单</span> <span
										class="label label-primary bstreeedit">修改</span> <span
										class="label label-danger	 bstreedel">删除</span>
								</a>
							</li>
							<li><a href="javascript:void(0);"
								data="id:8;url:/ucenter/user;"> <span
									class="glyphicon glyphicon-minus"></span> 用户管理(/ucenter/user) <span
									class="label label-primary bstreeadd">添加子菜单</span> <span
									class="label label-primary bstreeedit">修改</span> <span
									class="label label-danger	 bstreedel">删除</span>
							</a></li>
							<li><a href="javascript:void(0);"
								data="id:23;url:/ucenter/role;"> <span
									class="glyphicon glyphicon-minus"></span> 角色管理(/ucenter/role) <span
									class="label label-primary bstreeadd">添加子菜单</span> <span
									class="label label-primary bstreeedit">修改</span> <span
									class="label label-danger	 bstreedel">删除</span>
							</a></li>
						</ul></li>
				</ul></li>
		</ul>
	</div>
</div>

<!-- 基于bootstrap3的dialog优化 -->
		
		<script src="${ctx!}/assets/js/bootbox.js"></script>

<script type="text/javascript">
$.fn.qdata = function(){
	var res = {};
	
	var data = $(this).attr('data');
	if(data){
		var options = data.split(';');
		for(var i=0; i<options.length; i++){
			if(options[i]){
				var opt = options[i].split(':');
				res[opt[0]] = opt[1];
			}
		}
	}
	
	return res;
};

	$(function(){
		$(".label").css("position","initial");
		
		var html = '<form class="form-horizontal" role="form"><input type="hidden" name="row.ucenter_menu_parent_id" value="23"><div class="form-group"><label for="id-row.ucenter_menu_title" class="control-label col-xs-12 col-sm-2 col-md-2 col-lg-2">菜单名称</label><div class="col-xs-12 col-sm-10 col-md-10 col-lg-10"><input type="text" name="row.ucenter_menu_title" value="" placeholder="菜单名称" class="form-control" id="id-row.ucenter_menu_title"></div></div><div class="form-group"><label for="id-row.ucenter_menu_url" class="control-label col-xs-12 col-sm-2 col-md-2 col-lg-2">菜单地址</label><div class="col-xs-12 col-sm-10 col-md-10 col-lg-10"><input type="text" name="row.ucenter_menu_url" value="" placeholder="菜单地址" class="form-control" id="id-row.ucenter_menu_url"></div></div><div class="form-group"><label for="id-row.ucenter_menu_sn" class="control-label col-xs-12 col-sm-2 col-md-2 col-lg-2">菜单序号</label><div class="col-xs-12 col-sm-10 col-md-10 col-lg-10"><input type="text" name="row.ucenter_menu_sn" value="" placeholder="菜单序号" class="form-control" id="id-row.ucenter_menu_sn"></div></div><div class="form-group"><label class="control-label col-xs-12 col-sm-2 col-md-2 col-lg-2">后台菜单</label><div class="col-xs-12 col-sm-10 col-md-10 col-lg-10"><label class="radio-inline"><input type="radio" name="row.ucenter_menu_type" value="000101" checked>是</label><label class="radio-inline"><input type="radio" name="row.ucenter_menu_type" value="000102">否</label></div></div></form>';
		
		bootbox.confirm({ 
		    message: html, 
		    callback: function(result){ /* your callback code */ }
		})
		
		/* on的用法参考 http://stackoverflow.com/questions/14354040/jquery-1-9-live-is-not-a-function */
		$("#treeul").on("click",".glyphicon-minus",function(){
			 if($(this).parent().next().length > 0){
	            $('#treeid_' + $(this).parents('a').qdata().id).collapse('hide');
	            $(this).removeClass('glyphicon-minus').addClass('glyphicon-plus');
	        }
			
		});
		
		$("#treeul").on("click",".glyphicon-plus",function(){
			if($(this).parent().next().length > 0){
	            $('#treeid_' + $(this).parents('a').qdata().id).collapse('show');
	            $(this).removeClass('glyphicon-plus').addClass('glyphicon-minus');
	        }
		});
		
	});	
</script>

</@layout>
