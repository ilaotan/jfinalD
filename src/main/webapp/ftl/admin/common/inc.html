<#-- 除了layout之外的小模块都放在这里面供不同页面调用  -->

<#-- bsinput -->
<#macro bsinput type='text' title='title' name='name' value='' lg=false col=true input=true dis=false>
	<#if input>
		<div class="form-group">
			<label for="id-${name}" class="control-label <#if col>col-xs-12 col-sm-2 col-md-2 col-lg-2</#if>">${title}</label>
			<div class="<#if col>col-xs-12 col-sm-10 col-md-10 col-lg-10</#if>">
				<input type="${type}" name="${name}" value="${value}" placeholder="${title}" class="form-control <#if lg>input-lg</#if>" <#if dis>disabled</#if> id="id-${name}">
			</div>
		</div>
	<#else>
		<div class="form-group">
			<label class="control-label <#if col>col-xs-12 col-sm-2 col-md-2 col-lg-2</#if>">${title}</label>
			<div class="<#if col>col-xs-12 col-sm-10 col-md-10 col-lg-10</#if>">
				<#nested>
			</div>
		</div>
	</#if>
</#macro>

<#-- 
bsradios 
	like this:
	<@bsradios name='row.pro_type' ck='${(row.pro_type)!"020101"}' list=types/>
-->
<#macro bsradios list name ck>
	<#list list as item>
		<label class="radio-inline">
			<input type="radio" name="${name}" value="${item.value}" <#if item.value == ck>checked</#if>>${item.text}
		</label>
	</#list>
</#macro>

<#-- bstree -->
<#macro bstree t ck=false edit=false showurl=true editurl='' height='600'>
<#if t??>
	<div class="panel panel-info">
		<div class="panel-body" style="height:${height}px;overflow-y:auto;">
			<ul class="nav nav-list sidenav" id="treeul" data="url:${editurl};">
				<@bssubtree tree=t ck=ck edit=edit showurl=showurl/>
			</ul>
		</div>
	</div>
</#if>
</#macro>

<#-- bssubtree -->
<#macro bssubtree tree open=true ck=false edit=false showurl=true>
<#if tree??>
	<li>
		<a href="javascript:void(0);" data="id:${tree.id};url:${tree.url};">
			<@bsicon icon='minus'/>
			<#if ck><input type="checkbox" class="treecheckbox" <#if tree.checked>checked</#if>/></#if>
			${tree.text}<#if showurl>(${tree.url})</#if>
			<#if edit>
				<span class="label label-primary bstreeadd">添加子菜单</span>
				<span class="label label-primary bstreeedit">修改</span>
				<span class="label label-danger	 bstreedel">删除</span>
			</#if>
		</a>
		<#if tree.children?? && tree.children?size gt 0>
			<ul style="padding-left:20px;" id="treeid_${tree.id}" class="nav collapse <#if open>in</#if>">
				<#list tree.children as subtree>
					<@bssubtree tree=subtree ck=ck edit=edit showurl=showurl/>
				</#list>
			</ul>
		</#if>
	</li>
</#if>
</#macro>

<#-- dataTables -->
<#macro bstable page="" pagestr="" >
	<div class="row">
		<div class="col-xs-12">
			<table id="simple-table" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th>用户名</th>
						<th>用户类型</th>
						<th>账号状态</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					<#list page.list?if_exists as row>
						<tr data="id:${row.id};">
							<td>${row.username}</td>
							<td>${row.user_type}</td>
							<td>${row.is_locked?c}</td>
							<td>
								<div class="hidden-sm hidden-xs btn-group">
									<button class="btn btn-xs btn-success">
										<i class="ace-icon fa fa-check bigger-120"></i>
									</button>
			
									<button class="btn btn-xs btn-info">
										<i class="ace-icon fa fa-pencil bigger-120"></i>
									</button>
			
									<button class="btn btn-xs btn-danger">
										<i class="ace-icon fa fa-trash-o bigger-120"></i>
									</button>
			
									<button class="btn btn-xs btn-warning">
										<i class="ace-icon fa fa-flag bigger-120"></i>
									</button>
								</div>
							</td>
						</tr>
					</#list>
				</tbody>
			</table>
			<div class="row">
				<div class="col-xs-12 col-sm-8 col-md-9 col-lg-10">
				${pagestr}
				</div>
			</div>
		</div><!-- /.span -->
	</div><!-- /.row -->

</#macro>

<#-- bspage    <@bspage page=page />-->
<#macro bspage page pagesizelist=[50,100]>
	<#assign pagenum = page.totalPage>
	<#if pagenum gt 1>
		<div class="row">
			<div class="col-xs-12 col-sm-8 col-md-9 col-lg-10">
				<#if pagenum lt 5>
					<ul class="pagination" style="margin:0;">
						<li <#if page.pageNumber == 1>class="disabled"</#if>>
							<@bsbutton icon='step-backward' class='crud crudfirst'/>
						</li>
						<li <#if page.pageNumber == 1>class="disabled"</#if>>
							<@bsbutton icon='chevron-left' class='crud crudprev'/>
						</li>
						<#list 1..pagenum as pn>
							<li <#if page.pageNumber == pn>class="active"</#if>>
								<a href="javascript:void(0);" class="cruda">${pn}</a>
							</li>
						</#list>
						<li <#if page.pageNumber == pagenum>class="disabled"</#if>>
							<@bsbutton icon='chevron-right' class='crud crudnext'/>
						</li>
						<li	<#if page.pageNumber == pagenum>class="disabled"</#if>>
							<@bsbutton icon='step-forward' class='crud crudlast' data='page:${pagenum};'/>
						</li>
						<li class="disabled">
							<a href="javascript:void(0);">共${pagenum}页，${page.totalRow}条</a>
						</li>
					</ul>
				<#else>
					<ul class="pagination" style="margin:0;">
						<li <#if page.pageNumber == 1>class="disabled"</#if>>
							<@bsbutton icon='step-backward' class='crud crudfirst'/>
						</li>
						<li <#if page.pageNumber == 1>class="disabled"</#if>>
							<@bsbutton icon='chevron-left' class='crud crudprev'/>
						</li>
						<li <#if page.pageNumber == 1>class="active"</#if>>
							<a href="javascript:void(0);" class="cruda">1</a>
						</li>
						<li class="disabled">
							<a href="javascript:void(0);" class="cruda">...</a>
						</li>
						<#list 1..pagenum as pn>
							<#if page.pageNumber==1>
								<#if (page.pageNumber+1 == pn) || (page.pageNumber+2 == pn) || (page.pageNumber+3 == pn)>
									<li <#if page.pageNumber == pn>class="active"</#if>>
										<a href="javascript:void(0);" class="cruda">${pn}</a>
									</li>
								</#if>
							</#if>
							<#if page.pageNumber==2>
								<#if (page.pageNumber == pn) || (page.pageNumber+1 == pn) || (page.pageNumber+2 == pn)>
									<li <#if page.pageNumber == pn>class="active"</#if>>
										<a href="javascript:void(0);" class="cruda">${pn}</a>
									</li>
								</#if>
							</#if>
							<#if page.pageNumber gt 2 && page.pageNumber+2 <= pagenum>
								<#if (page.pageNumber-1 == pn) || (page.pageNumber == pn) || (page.pageNumber+1 == pn)>
									<li <#if page.pageNumber == pn>class="active"</#if>>
										<a href="javascript:void(0);" class="cruda">${pn}</a>
									</li>
								</#if>
							</#if>
							<#if page.pageNumber==pagenum-1>
								<#if (page.pageNumber == pn) || (page.pageNumber-1 == pn) || (page.pageNumber-2 == pn)>
									<li <#if page.pageNumber == pn>class="active"</#if>>
										<a href="javascript:void(0);" class="cruda">${pn}</a>
									</li>
								</#if>
							</#if>
							<#if page.pageNumber==pagenum>
								<#if (page.pageNumber-1 == pn) || (page.pageNumber-2 == pn) || (page.pageNumber-3 == pn)>
									<li <#if page.pageNumber == pn>class="active"</#if>>
										<a href="javascript:void(0);" class="cruda">${pn}</a>
									</li>
								</#if>
							</#if>
						</#list>
						<li class="disabled">
							<a href="javascript:void(0);" class="cruda">...</a>
						</li>
						<li <#if page.pageNumber == pagenum>class="active"</#if>>
							<a href="javascript:void(0);" class="cruda">${pagenum}</a>
						</li>
						<li <#if page.pageNumber == pagenum>class="disabled"</#if>>
							<@bsbutton icon='chevron-right' class='crud crudnext'/>
						</li>
						<li	<#if page.pageNumber == pagenum>class="disabled"</#if>>
							<@bsbutton icon='step-forward' class='crud crudlast' data='page:${pagenum};'/>
						</li>
						<li class="disabled">
							<a href="javascript:void(0);">共${pagenum}页，${page.totalRow}条</a>
						</li>
					</ul>
				</#if>
			</div>
		</div>
	</#if>
</#macro>


<#-- bsbutton -->
<#macro bsbutton dis=false type="primary" href='javascript:void(0);' blank=false pos='left' size='' icon='' class='' style='' data='' title='' id=''>
	<a 	<#if id!=''>id="${id}"</#if> 
		<#if data!=''>data="${data}"</#if>
		<#if dis>disabled="disabled"</#if> 
		<#if blank>target="_blank"</#if>
		href="${href}" 
		class="btn btn-${type} <#if size != ''>btn-${size}</#if> <#if class!=''>${class}</#if>" 
		<#if style!=''> style="${style}"</#if>
		<#if title!=''> title="${title}"</#if>
	>
		<#if pos == 'left'><@bsicon icon=icon></@bsicon></#if>
		<#nested>
		<#if pos == 'right'><@bsicon icon=icon></@bsicon></#if>
	</a>
</#macro>

<#-- bsicon -->
<#macro bsicon icon=''>
	<#if icon != ''>
		<span class="glyphicon glyphicon-${icon}"></span>
	</#if>
</#macro>